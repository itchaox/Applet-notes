# 小程序 — 进阶之路

## 1. 小程序基础 

1. 注册小程序账号
2. 安装微信开发者工具
3. 移动端基础：
   1. Flex 布局
   2. viewport 和 rem 适配

## 2. 小程序特点

### 2.1 小程序特点概述

1. 没有 DOM
2. 组件化开发
3. 体积小，单个压缩包体积不能大于2M，否则无法上线
4. 小程序的四个重要文件：
   1. *.js
   2. *.wxml -> view 结构 -> html
   3. *wxss -> view 样式 -> css
   4. *.json -> view 数据 -> json 文件
5. 小程序适配方案：rpx（响应式像素单位）
   1. 小程序适配单位：rpx
   2. 规定任何屏幕下宽度都为 750rpx
   3. 小程序会根据屏幕的宽度不同，然后再自动计算rpx值的大小
   4. 例如：iPhone6（375px大小），1rpx = 1物理像素 = 0.5px

## 3. 初始化项目说明

1. pages
   * 存放页面代码
2. utils 文件夹
   * 存放工具类代码
3. app.js
   * 必须有 app.js
   * app.js 中必须有且只有一个 App( )，用来注册整个小程序应用
4. app.json
   * 对微信小程序进行全局配置
5. app.wxss
   * 公共样式
6. project.config.json
   * 项目配置文件
7. sitemap.json
   * 用于配置小程序及其页面是否允许被微信索引

## 4. wxml 语法

 ### 4.1 数据绑定

#### 4.1.1 初始化数据

* 页面中的 index.js 中 data 选项：

  ```javascript
  Page({
    data: {
      message: 'itchao'
    }
  })
  ```

 #### 4.1.2 使用数据

* 语法：{ {  } }
* 例子：`<text>{{ message }}</text>`

#### 4.1.3 修改数据

* 语法：this.setData({ })
* 例子：`this.setData({ message: 'chenchen' })`
* 注意：修改数据的行为始终是同步的
* 数据流：单向数据流，Model -> View

### 4.2 事件绑定

#### 4.2.1 事件分类

1. 冒泡事件

   * 概念：当一个组件被触发后，该事件会向父节点传递

   * 冒泡事件列表：

     https://mp.weixin.qq.com/debug/wxadoc/dev/framework/view/wxml/event.html

2. 非冒泡事件

   * 概念：当一个组件被触发后，该事件不会向父节点传递

   * 非冒泡事件列表：表单事件和自定义事件通常是非冒泡事件

     https://mp.weixin.qq.com/debug/wxadoc/dev/framework/view/wxml/event.html

#### 4.2.2 事件绑定

1. bind 绑定：不阻止事件冒泡的绑定（冒泡事件）

   ```javascript
   <view bindtap='handleTap' class='A'>
     <text class='b'>B</text>
   </view>
   ```

   

2. catch 绑定：阻止事件冒泡的绑定（非冒泡事件）

   ```javascript
   <view catchtap='handleTap' class='A'>
     <text class='b'>B</text>
   </view>
   ```

### 4.3  路由跳转

* 语法：直接在方法中调用对应路由跳转 API

* 注意：url 中路径最前面必须加 / ，否则会出现路径不匹配错误

* 例子：

  ```javascript
  // 路由跳转至logs
    routeA() {
      wx.navigateTo({
        url: '/pages/logs/logs'
      })
    },
  ```

* 常见路由 API：

  a) wx.navigateTo( )

  b) wx.redirectTo( )

  c) wx.switchTab( )

  等等

### 4.4 生命周期

1. onLoad ( )
   * 作用：监听页面加载
   * 使用场景：发送请求

2. onReady ( )
   * 作用：监听页面初次渲染完成（页面加载完成）
   * 使用场景：发送请求
3. onShow ( )
   * 作用：监听页面显示
   * 注意：可执行多次
4. onHide ( )
   * 作用：监听页面隐藏
5. onUnload ( )
   * 作用：监听页面卸载

